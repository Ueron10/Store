<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="StoreProgram.Pages.ReportsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Laporan dan Analisis">
    
    <ScrollView Padding="20">
        <StackLayout Spacing="20">
            
            <!-- Period Selection -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸ“Š Pilih Periode Laporan" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                        
                        <Button Grid.Column="0" 
                                x:Name="DailyButton" 
                                Text="Harian" 
                                BackgroundColor="{StaticResource Primary}" 
                                TextColor="White" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                FontSize="14" 
                                Clicked="OnDailyReportClicked"/>
                        
                        <Button Grid.Column="1" 
                                x:Name="WeeklyButton" 
                                Text="Mingguan" 
                                BackgroundColor="{StaticResource Gray200}" 
                                TextColor="{StaticResource Gray700}" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                FontSize="14" 
                                Clicked="OnWeeklyReportClicked"/>
                        
                        <Button Grid.Column="2" 
                                x:Name="MonthlyButton" 
                                Text="Bulanan" 
                                BackgroundColor="{StaticResource Gray200}" 
                                TextColor="{StaticResource Gray700}" 
                                CornerRadius="8" 
                                HeightRequest="40" 
                                FontSize="14" 
                                Clicked="OnMonthlyReportClicked"/>
                        
                    </Grid>
                </StackLayout>
            </Frame>
            
            <!-- Summary Cards -->
            <Grid ColumnDefinitions="*,*" 
                  RowDefinitions="*,*" 
                  ColumnSpacing="10" 
                  RowSpacing="10">
                
                <!-- Total Penjualan -->
                <Frame Grid.Row="0" 
                       Grid.Column="0" 
                       BackgroundColor="{StaticResource SuccessBg}" 
                       CornerRadius="15" 
                       Padding="15" 
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="ðŸ’°" 
                               FontSize="28" 
                               HorizontalOptions="Center"/>
                        <Label Text="Total Penjualan" 
                               FontSize="12" 
                               TextColor="{StaticResource TextSecondary}" 
                               HorizontalOptions="Center"/>
                        <Label x:Name="TotalSalesLabel" 
                               Text="Rp 0" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource SuccessText}" 
                               HorizontalOptions="Center"/>
                        <Label Text="Hari ini" 
                               FontSize="10" 
                               TextColor="{StaticResource TextSecondary}" 
                               Opacity="0.9" 
                               HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>
                
                <!-- Total Pengeluaran -->
                <Frame Grid.Row="0" 
                       Grid.Column="1" 
                       BackgroundColor="{StaticResource DangerBg}" 
                       CornerRadius="15" 
                       Padding="15" 
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="ðŸ’¸" 
                               FontSize="28" 
                               HorizontalOptions="Center"/>
                        <Label Text="Total Pengeluaran" 
                               FontSize="12" 
                               TextColor="{StaticResource TextSecondary}" 
                               HorizontalOptions="Center"/>
                        <Label x:Name="TotalExpensesLabel" 
                               Text="Rp 0" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource DangerText}" 
                               HorizontalOptions="Center"/>
                        <Label Text="Hari ini" 
                               FontSize="10" 
                               TextColor="{StaticResource TextSecondary}" 
                               Opacity="0.9" 
                               HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>
                
                <!-- Keuntungan Bersih -->
                <Frame Grid.Row="1" 
                       Grid.Column="0" 
                       BackgroundColor="{StaticResource WarningBg}" 
                       CornerRadius="15" 
                       Padding="15" 
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="ðŸ“ˆ" 
                               FontSize="28" 
                               HorizontalOptions="Center"/>
                        <Label Text="Keuntungan Bersih" 
                               FontSize="12" 
                               TextColor="{StaticResource TextSecondary}" 
                               HorizontalOptions="Center"/>
                        <Label x:Name="NetProfitLabel" 
                               Text="Rp 0" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource WarningText}" 
                               HorizontalOptions="Center"/>
                        <Label Text="Hari ini" 
                               FontSize="10" 
                               TextColor="{StaticResource TextSecondary}" 
                               Opacity="0.9" 
                               HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>
                
                <!-- Total Transaksi -->
                <Frame Grid.Row="1" 
                       Grid.Column="1" 
                       BackgroundColor="{StaticResource InfoBg}" 
                       CornerRadius="15" 
                       Padding="15" 
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="ðŸ§¾" 
                               FontSize="28" 
                               HorizontalOptions="Center"/>
                        <Label Text="Total Transaksi" 
                               FontSize="12" 
                               TextColor="{StaticResource TextSecondary}" 
                               HorizontalOptions="Center"/>
                        <Label x:Name="TotalTransactionsLabel" 
                               Text="0 Transaksi" 
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource InfoText}" 
                               HorizontalOptions="Center"/>
                        <Label Text="Hari ini" 
                               FontSize="10" 
                               TextColor="{StaticResource TextSecondary}" 
                               Opacity="0.9" 
                               HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>
                
            </Grid>
            
            <!-- Chart Placeholder -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸ“ˆ Grafik Penjualan" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <StackLayout Spacing="6">
                        <Label x:Name="ChartSubtitleLabel"
                               Text=""
                               FontSize="12"
                               TextColor="{StaticResource Gray600}"/>
                        <Frame BackgroundColor="{StaticResource Gray100}" 
                               CornerRadius="10" 
                               Padding="10" 
                               HasShadow="False" 
                               HeightRequest="220">
                            <GraphicsView x:Name="SalesChartView" HeightRequest="200" />
                        </Frame>
                    </StackLayout>
                </StackLayout>
            </Frame>
            
            <!-- Top Products -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸ† Produk Terlaris" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <StackLayout x:Name="TopProductsContainer" Spacing="12" />
                </StackLayout>
            </Frame>
            
            <!-- Export Options -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸ’¾ Export Laporan" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        
                        <Button Grid.Column="0" 
                                Text="ðŸ“„ Export PDF" 
                                BackgroundColor="{StaticResource Gray100}" 
                                TextColor="{StaticResource TextPrimary}" 
                                BorderColor="{StaticResource Gray300}"
                                BorderWidth="1"
                                CornerRadius="10" 
                                HeightRequest="50" 
                                FontAttributes="Bold" 
                                Clicked="OnExportPdfClicked"/>
                        
                        <Button Grid.Column="1" 
                                Text="ðŸ“Š Export Excel" 
                                BackgroundColor="{StaticResource Gray100}" 
                                TextColor="{StaticResource TextPrimary}" 
                                BorderColor="{StaticResource Gray300}"
                                BorderWidth="1"
                                CornerRadius="10" 
                                HeightRequest="50" 
                                FontAttributes="Bold" 
                                Clicked="OnExportExcelClicked"/>
                        
                    </Grid>
                </StackLayout>
            </Frame>
            
        </StackLayout>
    </ScrollView>
    
</ContentPage>