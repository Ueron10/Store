<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="StoreProgram.Pages.FinancialPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Manajemen Keuangan">
    
    <ScrollView Padding="20">
        <StackLayout Spacing="20">
            
            <!-- Daily Summary -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸ’° Ringkasan Hari Ini" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                        
                        <!-- Pendapatan -->
                        <Frame Grid.Column="0" 
                               BackgroundColor="{StaticResource SuccessBg}" 
                               CornerRadius="10" 
                               Padding="12" 
                               HasShadow="False">
                            <StackLayout>
                                <Label Text="Pendapatan" 
                                       FontSize="10" 
                                       TextColor="{StaticResource TextSecondary}" 
                                       HorizontalOptions="Center"/>
                                <Label x:Name="DailyIncomeLabel" 
                                       Text="Rp 0" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="{StaticResource SuccessText}" 
                                       HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        
                        <!-- Pengeluaran -->
                        <Frame Grid.Column="1" 
                               BackgroundColor="{StaticResource DangerBg}" 
                               CornerRadius="10" 
                               Padding="12" 
                               HasShadow="False">
                            <StackLayout>
                                <Label Text="Pengeluaran" 
                                       FontSize="10" 
                                       TextColor="{StaticResource TextSecondary}" 
                                       HorizontalOptions="Center"/>
                                <Label x:Name="DailyExpenseLabel" 
                                       Text="Rp 0" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="{StaticResource DangerText}" 
                                       HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        
                        <!-- Keuntungan -->
                        <Frame Grid.Column="2" 
                               BackgroundColor="{StaticResource WarningBg}" 
                               CornerRadius="10" 
                               Padding="12" 
                               HasShadow="False">
                            <StackLayout>
                                <Label Text="Keuntungan" 
                                       FontSize="10" 
                                       TextColor="{StaticResource TextSecondary}" 
                                       HorizontalOptions="Center"/>
                                <Label x:Name="DailyProfitLabel" 
                                       Text="Rp 0" 
                                       FontSize="12" 
                                       FontAttributes="Bold" 
                                       TextColor="{StaticResource WarningText}" 
                                       HorizontalOptions="Center"/>
                            </StackLayout>
                        </Frame>
                        
                    </Grid>
                </StackLayout>
            </Frame>
            
            <!-- Quick Actions -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="ðŸš€ Aksi Cepat" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        
                        <Button Grid.Column="0" 
                                Text="ðŸ›’ Transaksi Baru" 
                                BackgroundColor="{StaticResource Primary}" 
                                TextColor="White" 
                                CornerRadius="10" 
                                HeightRequest="60" 
                                FontAttributes="Bold" 
                                Clicked="OnNewTransactionClicked"/>
                        
                        <Button Grid.Column="1" 
                                Text="ðŸ’¸ Input Pengeluaran" 
                                BackgroundColor="{StaticResource DangerBg}" 
                                TextColor="{StaticResource DangerText}" 
                                BorderColor="{StaticResource Danger}"
                                BorderWidth="1"
                                CornerRadius="10" 
                                HeightRequest="60" 
                                FontAttributes="Bold" 
                                Clicked="OnAddExpenseClicked"/>
                        
                    </Grid>
                    
                    <!-- Prive / Pengambilan pribadi -->
                    <Button Text="ðŸ‘¤ Prive / Ambil Uang" 
                            BackgroundColor="{StaticResource WarningBg}" 
                            TextColor="{StaticResource WarningText}" 
                            BorderColor="{StaticResource Warning}"
                            BorderWidth="1"
                            CornerRadius="10" 
                            HeightRequest="50" 
                            FontAttributes="Bold" 
                            Clicked="OnPriveClicked"/>
                </StackLayout>
            </Frame>

            <!-- Expense Form (Form + DatePicker) -->
            <Frame x:Name="ExpenseFormFrame"
                   BackgroundColor="White"
                   CornerRadius="15"
                   Padding="20"
                   HasShadow="True"
                   IsVisible="False">
                <StackLayout Spacing="12">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0"
                               Text="ðŸ’¸ Input Pengeluaran"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Gray900}"/>
                        <Button Grid.Column="1"
                                Text="âœ•"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource Gray600}"
                                FontSize="18"
                                Clicked="OnCancelExpenseClicked"/>
                    </Grid>
                    <Label Text="Tanggal" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <DatePicker x:Name="ExpenseDatePicker" />
                    <Label Text="Deskripsi" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <Entry x:Name="ExpenseDescriptionEntry" Placeholder="Contoh: Listrik / Transport" BackgroundColor="{StaticResource Gray100}" />
                    <Label Text="Jumlah (Rp)" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <Entry x:Name="ExpenseAmountEntry" Placeholder="0" Keyboard="Numeric" BackgroundColor="{StaticResource Gray100}" />
                    <Button Text="Simpan Pengeluaran"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="White"
                            CornerRadius="10"
                            HeightRequest="48"
                            Clicked="OnSaveExpenseClicked"/>
                </StackLayout>
            </Frame>

            <!-- Prive Form (Form + DatePicker) -->
            <Frame x:Name="PriveFormFrame"
                   BackgroundColor="White"
                   CornerRadius="15"
                   Padding="20"
                   HasShadow="True"
                   IsVisible="False">
                <StackLayout Spacing="12">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0"
                               Text="ðŸ‘¤ Prive / Ambil Uang"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Gray900}"/>
                        <Button Grid.Column="1"
                                Text="âœ•"
                                BackgroundColor="Transparent"
                                TextColor="{StaticResource Gray600}"
                                FontSize="18"
                                Clicked="OnCancelPriveClicked"/>
                    </Grid>
                    <Label Text="Tanggal" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <DatePicker x:Name="PriveDatePicker" />
                    <Label Text="Keterangan" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <Entry x:Name="PriveDescriptionEntry" Placeholder="Prive pemilik" BackgroundColor="{StaticResource Gray100}" />
                    <Label Text="Jumlah (Rp)" FontAttributes="Bold" TextColor="{StaticResource Gray900}"/>
                    <Entry x:Name="PriveAmountEntry" Placeholder="0" Keyboard="Numeric" BackgroundColor="{StaticResource Gray100}" />
                    <Button Text="Simpan Prive"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="White"
                            CornerRadius="10"
                            HeightRequest="48"
                            Clicked="OnSavePriveClicked"/>
                </StackLayout>
            </Frame>
            
            <!-- Transaction Form (Initially Hidden) -->
            <Frame x:Name="TransactionFormFrame" 
                   BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True" 
                   IsVisible="False">
                <StackLayout Spacing="15">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" 
                               Text="ðŸ›’ Transaksi Baru" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource Gray900}"/>
                        <Button Grid.Column="1" 
                                Text="âœ•" 
                                BackgroundColor="Transparent" 
                                TextColor="{StaticResource Gray600}" 
                                FontSize="18" 
                                Clicked="OnCloseTransactionFormClicked"/>
                    </Grid>
                    
                    <!-- Product Selection -->
                    <StackLayout Spacing="5">
                        <Label Text="Pilih Produk" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource Gray900}"/>
                        <Picker x:Name="ProductPicker" 
                                Title="Pilih produk..." 
                                BackgroundColor="{StaticResource Gray100}" 
                                SelectedIndexChanged="OnProductSelectionChanged" />
                    </StackLayout>
                    
                    <!-- Quantity -->
                    <StackLayout Spacing="5">
                        <Label Text="Jumlah" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource Gray900}"/>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <Button Grid.Column="0" 
                                    Text="-" 
                                    BackgroundColor="{StaticResource Gray200}" 
                                    TextColor="{StaticResource Gray900}" 
                                    WidthRequest="40" 
                                    HeightRequest="40" 
                                    CornerRadius="5" 
                                    Clicked="OnDecreaseQuantityClicked"/>
                            <Entry Grid.Column="1" 
                                   x:Name="QuantityEntry" 
                                   Text="1" 
                                   Keyboard="Numeric" 
                                   HorizontalTextAlignment="Center" 
                                   BackgroundColor="{StaticResource Gray100}" 
                                   Margin="10,0" 
                                   TextChanged="OnQuantityTextChanged" />
                            <Button Grid.Column="2" 
                                    Text="+" 
                                    BackgroundColor="{StaticResource Gray200}" 
                                    TextColor="{StaticResource Gray900}" 
                                    WidthRequest="40" 
                                    HeightRequest="40" 
                                    CornerRadius="5" 
                                    Clicked="OnIncreaseQuantityClicked"/>
                        </Grid>
                    </StackLayout>
                    
                    <!-- Payment Method -->
                    <StackLayout Spacing="5">
                        <Label Text="Metode Pembayaran" 
                               FontSize="14" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource Gray900}"/>
                        <StackLayout Orientation="Horizontal" Spacing="20">
                            <RadioButton x:Name="CashRadio" 
                                         Content="ðŸ’µ Tunai" 
                                         IsChecked="True"/>
                            <RadioButton x:Name="QrisRadio" 
                                         Content="ðŸ“± QRIS"/>
                        </StackLayout>
                    </StackLayout>
                    
                    <!-- Total -->
                    <Frame BackgroundColor="{StaticResource Gray100}" 
                           CornerRadius="10" 
                           Padding="15" 
                           HasShadow="False">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" 
                                   Text="Total Pembayaran" 
                                   FontSize="16" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource Gray900}"/>
                            <Label Grid.Column="1" 
                                   x:Name="TotalLabel" 
                                   Text="Rp 3.000" 
                                   FontSize="18" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource Primary}"/>
                        </Grid>
                    </Frame>
                    
                    <!-- Process Button -->
                    <Button Text="ðŸ’³ Proses Transaksi" 
                            BackgroundColor="{StaticResource SuccessBg}" 
                            TextColor="{StaticResource SuccessText}" 
                            BorderColor="{StaticResource Success}"
                            BorderWidth="1"
                            CornerRadius="10" 
                            HeightRequest="50" 
                            FontAttributes="Bold" 
                            Clicked="OnProcessTransactionClicked"/>
                    
                </StackLayout>
            </Frame>
            
            <!-- Recent Transactions -->
            <Frame BackgroundColor="White" 
                   CornerRadius="15" 
                   Padding="20" 
                   HasShadow="True">
                <StackLayout Spacing="15">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" 
                               Text="ðŸ’³ Transaksi Terbaru" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource Gray900}"/>
                        <Label Grid.Column="1" 
                               Text="Hari ini" 
                               FontSize="12" 
                               TextColor="{StaticResource Gray600}" 
                               VerticalOptions="Center"/>
                    </Grid>
                    
                    <StackLayout x:Name="RecentTransactionsContainer" Spacing="12">
                        <Label Text="Belum ada data transaksi untuk ditampilkan."
                               FontSize="12"
                               TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                </StackLayout>
            </Frame>
            
        </StackLayout>
    </ScrollView>
    
</ContentPage>